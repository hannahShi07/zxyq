<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>个人中心</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../iconfont/iconfont.css">
    <link rel="stylesheet" href="../layui/css/layui.css"  media="all">
    <link rel="stylesheet" href="../css/zTreeStyle/zTreeStyle.css" type="text/css">
    <link rel="stylesheet" href="../css/public.css"  media="all">
    <script src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/jquery.ztree.core.js"></script>
    <script type="text/javascript" src="../js/jquery.ztree.exedit.js"></script>
    <script src="../layui/layui.js" charset="utf-8"></script>
    <script src="../js/public.js"></script>
    <script type="text/javascript">
        <!--
        var setting = {
            view: {
                selectedMulti: false
            }
        };

        var zNodes =[
            { name:"上访舆情"},
            { name:"安徽环保微信公众号"},
            { name:"污染舆情"},
            { name:"领导舆情"},
            { name:"平台信息"},
            { name:"合作机构信息"}
        ];

        $(document).ready(function(){
            $.fn.zTree.init($("#tree1"), setting, zNodes);
        });
        //-->
    </script>
</head>
<body style="background-color: #f2f2f2;">
    <div class="mainbox">
        <div class="po-header">
            <div class="po-nav">
                <div class="po-logo">
                    <a href="../index.html"><img src="../images/zaxlogowhite.png" alt=""></a>
                </div>
                <ul class="po-navlist">
                    <li class="nav-cell actived"><a href="../browse/index.html" class="">舆情浏览</a></li>
                    <li class="nav-cell"><a href="../browse/index-push.html" class="">舆情推送</a></li>
                </ul>
                <div class="userinfo togglebtn" onclick="toggleul(this)">
                    <span class="user-name">AHSR</span>
                    <span class="arrow-btn iconfont iconjiantouxia"></span>
                    <ul class="clearfix user-opt togglebox" style="display: none;">
                        <li><a href="" class="../personal/personal.html"> <i class="iconfont iconmenu_wd"></i><i>个人中心</i></a></li>
                        <li><a href="javascript:;"><i class="iconfont icontuichu"></i><i>退出登录</i></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="main-wrapper" style="padding-left: 0;">
            <!--设置左侧导航-->
            <div class="set-nav">
                <div class="tit">系统设置</div>
                <ul class="nav">
                    <li class="li1"><a class="hover" href="personal.html">专题设置</a>
                        <i></i>
                    </li>
                    <li class="li2"><a class="" href="personal_user.html">用户设置</a>
                        <i></i>
                    </li>
                    <li class="li3"><a class="" href="personal_collection.html">我的收藏</a>
                        <i></i>
                    </li>
                    <li class="li4"><a class="" href="personal_shangb.html">我的上报</a>
                        <i></i>
                    </li>
                </ul>
            </div>
            <!--设置左侧导航 end-->

            <!--设置内容-->
            <div class="set-infowary">
                <div class="tit1"><a class="hover">专题设置</a></div>
                <div class="set-cons1">
                    <div class="classification_wrap1">
                        <!--左盒子-->
                        <div class="classbox_l">
                            <div class="title">专题分类设置</div>
                            <div class="tree_wrap">
                                <div class="butwrap" the-id="butwrap">
                                    <ul>
                                        <li class="append"  onclick="addson()">
                                            <img src="../images/append.png" title="添加">
                                         <!--   <ul the-id="addspecialclass" style="display: none;" class="showzt">
                                                <span></span>
                                                <li class="li1" infos="1" onclick="addson()">添加子分类</li>
                                                <li class="li2" infos="2" onclick="addson2()">添加子专题</li>
                                            </ul>-->
                                        </li>
                                        <li class="delate" onclick="deletenode()"><img src="../images/delacitepic.png" title="删除"></li>
                                        <li class="move_up" onclick="moveup()"><img src="../images/move_up.png" title="上移"></li>
                                        <li class="move_down" onclick="movedown()"><img src="../images/move_down.png" title="下移"></li>
                                    </ul>
                                </div>
                                <div class="clear"></div>
                                <div class="content_wrap">
                                    <div class="zTreeDemoBackground left">
                                        <ul id="tree1" class="ztree"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--左盒子 end-->

                        <!--右侧盒子-->
                        <div class="classbox_r">
                            <div class="title1">
                                <p class="fl" the-id="ztName">上访舆情</p>
                                <!--<a href="" target="_blank" class="butZtinfos"></a>-->
                            </div>
                            <div class="compile updatecompile toLoadSpecial">
                                <div class="special_topic">
                                    <form class="layui-form" action="">
                                        <ul>
                                            <li class="st_wrapper">
                                                <div class="tit">专题名称</div>
                                                <div class="st_content">
                                                    <div class="layui-form-item">
                                                        <label class="layui-form-label">专题名称：</label>
                                                        <div class="layui-input-block">
                                                            <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input">
                                                        </div>
                                                    </div>
                                                    <div class="layui-form-item">
                                                        <label class="layui-form-label">专题是否启用：</label>
                                                        <div class="layui-input-block">
                                                            <input type="checkbox" checked="" name="open" lay-skin="switch" lay-filter="startSt" lay-text="启用|关闭">
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="st_wrapper">
                                                <div class="tit">数据来源</div>
                                                <div class="st_content">
                                                    <div class="layui-form-item">
                                                        <label class="layui-form-label">数据来源：</label>
                                                        <div class="layui-input-block">
                                                            <input type="radio" name="datasource" lay-filter="ds_chekall" value="全部" title="全部">
                                                            <input type="radio" name="datasource" lay-filter="ds_inverse" value="反选" title="反选">
                                                        </div>
                                                        <div class="layui-input-block">
                                                            <input type="checkbox" name="ds" lay-skin="primary" title="数据来源1">
                                                            <input type="checkbox" name="ds" lay-skin="primary" title="数据来源2">
                                                            <input type="checkbox" name="ds" lay-skin="primary" title="数据来源3">
                                                            <input type="checkbox" name="ds" lay-skin="primary" title="数据来源4">
                                                            <input type="checkbox" name="ds" lay-skin="primary" title="数据来源5">
                                                            <input type="checkbox" name="ds" lay-skin="primary" title="数据来源6">
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="st_wrapper">
                                                <div class="tit">关键词设置 <i style="color: #ff0000;">（多个关键词之间请用空格隔开）</i></div>
                                                <div class="st_content">
                                                    <div class="layui-form-item layui-form-text">
                                                        <label class="layui-form-label">
                                                            <i>机构词</i>
                                                            <span class="hover_txt" title="请输入想要监控的企业机构完整名称，比如：华为技术有限公司（*机构名称必须要输入全称）"><i class="qs-ico">?</i></span>
                                                        </label>
                                                        <div class="layui-input-block">
                                                            <textarea placeholder="请输入想要监控的企业机构完整名称，比如：华为技术有限公司（*机构名称必须要输入全称）" class="layui-textarea"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="layui-form-item layui-form-text">
                                                        <label class="layui-form-label">
                                                            <i>主体词</i>
                                                            <span class="hover_txt" title="请输入机构相关的主体词，比如：高管 监事 经理 雷军"><i class="qs-ico">?</i></span>
                                                        </label>
                                                        <div class="layui-input-block">
                                                            <textarea placeholder="请输入机构相关的主体词，比如：高管 监事 经理 雷军" class="layui-textarea"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="layui-form-item layui-form-text">
                                                        <label class="layui-form-label">
                                                            <i>事件词</i>
                                                            <span class="hover_txt" title="请输入主体词相关的事件词，比如：出轨 涉黄 涉暴 违法 犯罪 违规 包养 杀人"><i class="qs-ico">?</i></span>
                                                        </label>
                                                        <div class="layui-input-block">
                                                            <textarea placeholder="请输入主体词相关的事件词，比如：出轨 涉黄 涉暴 违法 犯罪 违规 包养 杀人" class="layui-textarea"></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="layui-form-item layui-form-text">
                                                        <label class="layui-form-label">
                                                            <i>歧义词排除</i>
                                                            <span class="hover_txt" title="请输入歧义词，排除不关注的数据信息，比如：券商公告 券商年报"><i class="qs-ico">?</i></span>
                                                        </label>
                                                        <div class="layui-input-block">
                                                            <textarea placeholder="请输入歧义词，排除不关注的数据信息，比如：券商公告 券商年报" class="layui-textarea"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="st_wrapper">
                                                <div class="tit">推送设置</div>
                                                <div class="st_content">
                                                    <div class="layui-form-item">
                                                        <label class="layui-form-label">推送设置：</label>
                                                        <div class="layui-input-block">
                                                            <input type="radio" name="pushset" value="推送" title="推送" checked="">
                                                            <input type="radio" name="pushset" value="不推送" title="不推送">
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="st_wrapper">
                                                <div class="tit">移动端新数据提醒设置</div>
                                                <div class="st_content">
                                                    <div class="layui-form-item">
                                                        <label class="layui-form-label">时间间隔：</label>
                                                        <div class="layui-input-block">
                                                            <input type="radio" name="timeinterval" value="不推送" title="不推送" checked="">
                                                            <input type="radio" name="timeinterval" value="5分钟" title="5分钟">
                                                            <input type="radio" name="timeinterval" value="10分钟" title="10分钟">
                                                            <input type="radio" name="timeinterval" value="30分钟" title="30分钟">
                                                            <input type="radio" name="timeinterval" value="60分钟" title="60分钟">
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>

                                        </ul>

                                    </form>
                                </div>
                            </div>
                        </div>
                        <!--右侧盒子 end-->
                    </div>
                </div>
            </div>
            <!--设置内容 end-->
        </div>
    </div>
    <!--专题编辑内容-->
    <div class="special_topic" id="stpop"  style="display: none">
        <form class="layui-form" action="">
            <ul>
                <li class="st_wrapper">
                    <div class="tit">专题名称</div>
                    <div class="st_content">
                        <div class="layui-form-item">
                            <label class="layui-form-label">专题名称：</label>
                            <div class="layui-input-block">
                                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">专题是否启用：</label>
                            <div class="layui-input-block">
                                <input type="checkbox" checked="" name="open" lay-skin="switch" lay-filter="startSt" lay-text="启用|关闭">
                            </div>
                        </div>
                    </div>
                </li>
                <li class="st_wrapper">
                    <div class="tit">数据来源</div>
                    <div class="st_content">
                        <div class="layui-form-item">
                            <label class="layui-form-label">数据来源：</label>
                            <div class="layui-input-block">
                                <input type="radio" name="datasource" lay-filter="ds_chekall" value="全部" title="全部">
                                <input type="radio" name="datasource" lay-filter="ds_inverse" value="反选" title="反选">
                            </div>
                            <div class="layui-input-block">
                                <input type="checkbox" name="ds" lay-skin="primary" title="数据来源1">
                                <input type="checkbox" name="ds" lay-skin="primary" title="数据来源2">
                                <input type="checkbox" name="ds" lay-skin="primary" title="数据来源3">
                                <input type="checkbox" name="ds" lay-skin="primary" title="数据来源4">
                                <input type="checkbox" name="ds" lay-skin="primary" title="数据来源5">
                                <input type="checkbox" name="ds" lay-skin="primary" title="数据来源6">
                            </div>
                        </div>
                    </div>
                </li>
                <li class="st_wrapper">
                    <div class="tit">关键词设置 <i style="color: #ff0000;">（多个关键词之间请用空格隔开）</i></div>
                    <div class="st_content">
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">
                                <i>机构词</i>
                                <span class="hover_txt" title="请输入想要监控的企业机构完整名称，比如：华为技术有限公司（*机构名称必须要输入全称）"><i class="qs-ico">?</i></span>
                            </label>
                            <div class="layui-input-block">
                                <textarea placeholder="" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">
                                <i>主体词</i>
                                <span class="hover_txt" title="请输入机构相关的主体词，比如：高管 监事 经理 雷军"><i class="qs-ico">?</i></span>
                            </label>
                            <div class="layui-input-block">
                                <textarea placeholder="" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">
                                <i>事件词</i>
                                <span class="hover_txt" title="请输入主体词相关的事件词，比如：出轨 涉黄 涉暴 违法 犯罪 违规 包养 杀人"><i class="qs-ico">?</i></span>
                            </label>
                            <div class="layui-input-block">
                                <textarea placeholder="" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">
                                <i>歧义词排除</i>
                                <span class="hover_txt" title="请输入歧义词，排除不关注的数据信息，比如：券商公告 券商年报"><i class="qs-ico">?</i></span>
                            </label>
                            <div class="layui-input-block">
                                <textarea placeholder="" class="layui-textarea"></textarea>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="st_wrapper">
                    <div class="tit">推送设置</div>
                    <div class="st_content">
                        <div class="layui-form-item">
                            <label class="layui-form-label">推送设置：</label>
                            <div class="layui-input-block">
                                <input type="radio" name="pushset" value="推送" title="推送" checked="">
                                <input type="radio" name="pushset" value="不推送" title="不推送">
                            </div>
                        </div>
                    </div>
                </li>
                <li class="st_wrapper">
                    <div class="tit">移动端新数据提醒设置</div>
                    <div class="st_content">
                        <div class="layui-form-item">
                            <label class="layui-form-label">时间间隔：</label>
                            <div class="layui-input-block">
                                <input type="radio" name="timeinterval" value="不推送" title="不推送" checked="">
                                <input type="radio" name="timeinterval" value="5分钟" title="5分钟">
                                <input type="radio" name="timeinterval" value="10分钟" title="10分钟">
                                <input type="radio" name="timeinterval" value="30分钟" title="30分钟">
                                <input type="radio" name="timeinterval" value="60分钟" title="60分钟">
                            </div>
                        </div>
                    </div>
                </li>

            </ul>

        </form>
    </div>
    <!--专题编辑内容 end-->
    <script>
        /*专题分类设置--点击添加*/
        $("body").on("click", ".append", function () {
            var slideobj = $(this).closest(".butwrap").find(".showzt");
            if(slideobj.css("display") == "none"){
                slideobj.show()
            }else{
                slideobj.hide()
            }
        })
        /*专题分类设置--上下移动节点*/
        function moveup() {
            var selectnode  = $.fn.zTree.getZTreeObj("tree1").getSelectedNodes();
            var treeObj = $.fn.zTree.getZTreeObj("tree1");
            var nodes = treeObj.getNodes();
            var index = treeObj.getNodeIndex(selectnode[0]);
            if(selectnode.length > 0){
                var level = selectnode[0].level;
                if(level == 0){
                    if(selectnode .length == 0){
                        alert("请选择向上移动的分类或专题！")
                    }else{
                        if(index == 0){
                            alert("已经到达顶端了！")
                        }else{
                            treeObj.moveNode(nodes[index-1], selectnode[0], "prev");
                        }
                    }
                }
            }else {
                alert("请选择一个节点")
            }

        }
        function movedown() {
            var selectnode  = $.fn.zTree.getZTreeObj("tree1").getSelectedNodes();
            var treeObj = $.fn.zTree.getZTreeObj("tree1");
            var nodes = treeObj.getNodes();
            var index = treeObj.getNodeIndex(selectnode[0]);
            if(selectnode.length > 0){
                var level = selectnode[0].level;
                if(level == 0){
                    if(selectnode .length == 0){
                        alert("请选择向下移动的分类或专题！")
                    }else{
                        if(index == nodes.length-1){
                            alert("已经到达底端了！")
                        }else{
                            treeObj.moveNode(nodes[index+1], selectnode[0], "next");
                        }
                    }
                }
            }else{
                alert("请选择一个节点")
            }

        }
        /*树节点添加子分类（添加0级节点）*/
        function addson() {
            var treeObj = $.fn.zTree.getZTreeObj("tree1");
            var txt = '';
            // ztree添加子元素方式
            /*var newNodes = [{name:txt}];
            newNodes = treeObj.addNodes(null, newNodes);*/
            layui.use('layer',function () {
                var layer = layui.layer;
                layer.open({
                    type:1,
                    content:$("#stpop"),
                    title:'',
                    area:['620','96%'],
                    btn:['保存','取消'],
                    btnAlign: 'c'

                })
            })

        }
        /*树节点添加子专题（仅0级节点可添加）*/
        function addson2() {
            var selectnode  = $.fn.zTree.getZTreeObj("tree1").getSelectedNodes();
            var len = selectnode.length;
//            var level = selectnode[0].level;
            var treeObj = $.fn.zTree.getZTreeObj("tree1");
            var nodes = treeObj.getNodes();
            if(len >0){
                var level = selectnode[0].level;
                if(level == 0){
                    var newNodes = [{name:"newNode1"}];
                    newNodes = treeObj.addNodes(selectnode[0], newNodes)
                }
            }else{
                alert("请选中一个节点")
            }
        }
        /*删除节点*/
        function deletenode() {
            var selectnode  = $.fn.zTree.getZTreeObj("tree1").getSelectedNodes();
            var len = selectnode.length;
            var treeObj = $.fn.zTree.getZTreeObj("tree1");
            if(selectnode && len > 0){
                layui.use('layer',function () {
                    var layer = layui.layer;
                    layer.confirm('确定删除？', {
                        btn: ['确定','取消']
                    }, function(index){
                        var pnode = selectnode[0].getParentNode();
                        treeObj.updateNode(pnode);
                        treeObj.selectNode(pnode);
                        treeObj.removeNode(selectnode[0]);
                        layer.close(index);
                    });
                })

            }else{
                alert("请选中一个节点")
            }
        }
    </script>
    <script>
        layui.use(['form', 'layedit', 'laydate', 'layer'], function() {
            var laydate = layui.laydate
                ,form = layui.form
                ,layer =layui.layer;
            //日期范围
            laydate.render({
                elem: '#test6'
                ,range: true
            });
            laydate.render({
                elem: '#test7'
                ,range: true
            });
            /*隐藏摘要*/
            form.on('checkbox(hideabs)', function(data){
                var listms = $(this).closest(".yq_news_list").find(".list_message");
                if(data.elem.checked){
                    listms.slideUp()
                }else{
                    listms.slideDown()
                }
            });
            /*全选全不选*/
            var check = null;
            var arr = [];
            form.on('checkbox(all_check)', function(data){
                var child = $(this).closest(".yq_news_list").find(':checkbox[name="message_check"]');
                child.each(function(index, item){
                    item.checked = data.elem.checked;
                });
                form.render('checkbox');
            });
            form.on('checkbox(messageck)', function (data) {
                var child = $(this).closest(".yq_news_list").find(':checkbox[name="message_check"]');
                arr = [];
                child.each(function(index, item){
                    arr.push(item.checked+'')
                });
                var b = arr.indexOf("false");
                if(data.elem.checked == false){
                    check = false
                    $(this).closest(".yq_news_list").find(':checkbox[name="all_check"]').prop("checked", false);
                    form.render('checkbox');
                }else if(b == -1){
                    $(this).closest(".yq_news_list").find(':checkbox[name="all_check"]').prop("checked", true);
                    form.render('checkbox');
                }
            })

            /*专题编辑--数据来源全选与反选*/
            /*全选*/
            form.on('radio(ds_chekall)', function(data){
                $(this).closest(".layui-form-item").find(':checkbox[name="ds"]').prop("checked", true)
                form.render('checkbox');
            });
            /*反选*/
            form.on('radio(ds_inverse)', function(data){
                var child = $(this).closest(".layui-form-item").find(':checkbox[name="ds"]');
                child.each(function (index, item) {
                    item.checked == true?item.checked = false:item.checked = true;
                });
                form.render('checkbox');
            });
        })
    </script>
</body>
</html>